<template>
    
    <section title = "En cours" class="disposition">
        <h2>En Cours</h2>
        <template if:true={limitedRequests}>
            <template for:each={limitedRequests} for:item="request" >
                <div key ={request.Id} class="liste">
                    <div class="slds-truncate" title={request.formattedDate}>
                        {request.formattedDate}
                    </div>
                    <div class="slds-truncate" title={request.Title__c}>
                            {request.Title__c}
                        </div>
                    
                        <div class="slds-truncate" title={request.Statut__c}>
                            {request.Statut__c}
                        </div>
                
                        <div class="slds-truncate" title={request.CaseType__c}>
                            {request.CaseType__c}
                        </div>
                
                    
                        <div class="slds-truncate" title={request.Epic__c}>
                            {request.Epic__c}
                        </div>
                    
                </div>     
            </template>
            <template if:true={hasMoreThanFiveRequests} >
                <div class="custom-button">
                    <lightning-button variant="brand" label="Voir toutes les demandes" onclick={handleViewAllClick}></lightning-button>
                </div>
                
            </template>

        </template>
        <template if:false={limitedRequests}>   
                    <div class="slds-text-align_center">Aucune demande trouv√©e</div>

        </template>

        <template if:true={isPopupOpen}>
            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                <div class="slds-modal__container">
                    <header class="slds-modal__header">
                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={handleClosePopup}>
                            <lightning-icon icon-name="utility:close" alternative-text="Close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                        <h3 class="slds-text-heading_medium">Toutes les demandes</h3>
                    </header>
                    <div class="slds-modal__content slds-p-around_medium">
                        <template for:each={allRequests} for:item="request">
                            <div key={request.Id} class="liste">
                                <div class="slds-truncate" title={request.formattedDate}>
                                    {request.formattedDate}
                                </div>
                                <div class="slds-truncate" title={request.Title__c}>
                                    {request.Title__c}
                                </div>
                                <div class="slds-truncate" title={request.Statut__c}>
                                    {request.Statut__c}
                                </div>
                                <div class="slds-truncate" title={request.CaseType__c}>
                                    {request.CaseType__c}
                                </div>
                                <div class="slds-truncate" title={request.Epic__c}>
                                    {request.Epic__c}
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </section>
        </template>
        
    </section>
    
</template>